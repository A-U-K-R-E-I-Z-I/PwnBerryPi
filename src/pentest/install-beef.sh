#!/bin/bash
#   Original install-beef script:
#   Copyright 2012 Wade Alcorn wade@bindshell.net
#
#   install-beef for the Raspberry Pi
#   Author: G13 g13net@gmail.com
#   www.g13net.com
#
#   PwnBerryPi: Pentesting Suite for Raspberry Pi
#   https://github.com/g13net/PwnBerryPi
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.
#

clear
echo "======================================"
echo "          BeEF Installer   "
echo "======================================"
echo ""

echo "CAUTION: This installation script will install a number of BeEF dependencies including the Ruby-RVM environemnt and it's dependencies." 
echo "" 
echo "In rare cases, this may lead to unexpected behaviour or package conflicts on some systems."
echo ""
read -p  "Are you sure you wish to continue (Y/n)? " 
if [ "`echo ${REPLY} | tr [:upper:] [:lower:]`" == "n" ] ; then
	 exit;
fi

apt-get update 
apt-get install curl git

sudo apt-get install build-essential openssl libreadline6 libreadline6-dev zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev autoconf libc6-dev libncurses5-dev automake libtool bison subversion

bash < <(curl -sk https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)

echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"' >> ~/.bashrc

mkdir -p $HOME/.rvm/scripts

ln -s /usr/local/rvm/scripts/rvm $HOME/.rvm/scripts/rvm

source ~/.bashrc
source $HOME/.rvm/scripts/rvm
        
rvm install 1.9.2

rvm use 1.9.2 --default

echo "Downloading BeEF.."
git clone git://github.com/beefproject/beef.git
cd beef

echo "Installing Ruby Gems"
gem install bundler
bundle install
	
./beef

echo ""
echo "=========================================="
echo "          Install Complete"
echo "=========================================="

